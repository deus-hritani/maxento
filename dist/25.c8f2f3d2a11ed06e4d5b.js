/*! @version 0.0.1-55d0bd1c86dd20165df3 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"2CKw":function(e,a,t){var n=t("ft5F")
"string"==typeof n&&(n=[[e.i,n,""]])
var r={hmr:!0,transform:void 0,insertInto:void 0}
t("aET+")(n,r)
n.locals&&(e.exports=n.locals)},PH6a:function(e,a,t){(a=e.exports=t("JPst")(!1)).push([e.i,".addEditDialog-root-1AU {\n    display: grid;\n    gap: 0.5rem 1.5rem;\n    grid-template-columns: 1fr;\n}\n\n/*\n *  Desktop-specific styles.\n */\n@media (min-width: 961px) {\n    .addEditDialog-root-1AU {\n        grid-template-columns: 1fr 1fr;\n    }\n\n    .addEditDialog-fullWidthField-2aX {\n        grid-column-end: span 2;\n    }\n\n    .addEditDialog-lastname-1gP,\n    .addEditDialog-country-3tX,\n    .addEditDialog-default_address_check-t8O {\n    }\n}\n",""]),a.locals={root:"addEditDialog-root-1AU",fullWidthField:"addEditDialog-fullWidthField-2aX",lastname:"addEditDialog-lastname-1gP addEditDialog-fullWidthField-2aX",country:"addEditDialog-country-3tX addEditDialog-fullWidthField-2aX",default_address_check:"addEditDialog-default_address_check-t8O addEditDialog-fullWidthField-2aX"}},Qe2W:function(e,a,t){(a=e.exports=t("JPst")(!1)).push([e.i,".addressBookPage-root-2tr {\n    padding: 2.5rem 3rem;\n    max-width: var(--venia-global-maxWidth);\n    margin: 0 auto;\n}\n\n.addressBookPage-heading-3vp {\n    font-family: var(--venia-global-fontFamily-serif);\n    font-weight: var(--venia-global-fontWeight-bold);\n    line-height: 1.25em;\n    margin-bottom: 2rem;\n    text-align: center;\n    text-transform: capitalize;\n}\n\n.addressBookPage-content-3q_ {\n    display: grid;\n    gap: 1rem;\n    grid-auto-rows: minmax(6rem, max-content);\n    grid-template-columns: 1fr 1fr 1fr;\n}\n\n.addressBookPage-addButton-zow {\n    border: 2px dashed rgb(var(--venia-global-color-gray-400));\n    border-radius: 0.375rem;\n    font-size: 0.875rem;\n    font-weight: 600;\n    transition: border-color 384ms var(--venia-global-anim-standard);\n    color: rgb(var(--venia-brand-color-1-700));\n}\n\n.addressBookPage-addButton-zow:focus {\n    outline: none;\n    box-shadow: -6px 6px rgb(var(--venia-global-color-blue-700) / 0.3);\n}\n\n.addressBookPage-addButton-zow:hover {\n    border-color: rgb(var(--venia-brand-color-1-600));\n}\n\n@media (max-width: 1024px) {\n    .addressBookPage-root-2tr {\n        padding-left: 1.5rem;\n        padding-right: 1.5rem;\n    }\n\n    .addressBookPage-content-3q_ {\n        grid-template-columns: 1fr 1fr;\n    }\n}\n\n@media (max-width: 640px) {\n    .addressBookPage-content-3q_ {\n        grid-template-columns: 1fr;\n    }\n}\n",""]),a.locals={root:"addressBookPage-root-2tr",heading:"addressBookPage-heading-3vp",content:"addressBookPage-content-3q_",addButton:"addressBookPage-addButton-zow"}},ft5F:function(e,a,t){(a=e.exports=t("JPst")(!1)).i(t("ysJs"),""),a.i(t("Gs8Z"),""),a.push([e.i,".addressCard-root-1pp {\n    align-content: flex-start;\n    border: 2px solid rgb(var(--venia-global-color-gray-400));\n    border-radius: 0.375rem;\n    display: grid;\n    grid-template-columns: 1fr max-content;\n    padding: 1.25rem 2rem;\n    position: relative;\n}\n\n.addressCard-root_updated-3w2 {\n    animation: addressCard-flash-2xj var(--venia-global-anim-bounce) 640ms 2;\n}\n\n.addressCard-confirmDeleteContainer-1IU {\n    align-items: center;\n    background-color: rgba(255, 255, 255, 0.9);\n    display: grid;\n    gap: 2rem;\n    grid-template-columns: repeat(auto-fit, minmax(10rem, 1fr));\n    height: 100%;\n    justify-items: center;\n    left: 0;\n    padding: 1.25rem 2rem;\n    position: absolute;\n    top: 0;\n    width: 100%;\n}\n\n.addressCard-confirmDeleteButton-37f {\n\n    background-color: white;\n    order: 1;\n}\n.addressCard-cancelDeleteButton-3p2 {\n\n    background-color: white;\n}\n\n.addressCard-contentContainer-1zl {\n    display: grid;\n    row-gap: 0.5rem;\n}\n\n.addressCard-actionContainer-ZU9 {\n    align-content: start;\n    display: grid;\n    justify-items: start;\n    row-gap: 0.5rem;\n}\n\n.addressCard-defaultBadge-2mz {\n    width: max-content;\n    padding: 0.375rem 1.5rem;\n    margin-bottom: 0.25rem;\n    border: 1px solid rgb(var(--venia-global-color-gray-400));\n    border-radius: 0.375rem;\n    font-size: 0.75rem;\n    font-weight: 600;\n}\n\n.addressCard-name-y7R {\n    font-weight: 600;\n}\n\n.addressCard-telephone-2VP {\n    margin-top: 0.5rem;\n}\n\n.addressCard-linkButton-3YW {\n    text-decoration: none;\n}\n\n.addressCard-editButton-1kJ {\n}\n\n.addressCard-deleteButton-2J- {\n}\n\n@media (max-width: 640px) {\n    .addressCard-root-1pp {\n        padding: 1rem;\n    }\n\n    .addressCard-confirmDeleteContainer-1IU {\n        padding: 1rem;\n        grid-template-columns: 1fr;\n    }\n\n    .addressCard-confirmDeleteButton-37f {\n        order: 0;\n    }\n}\n\n@media (max-width: 384px) {\n    .addressCard-actionLabel-2rd {\n        display: none;\n    }\n\n    .addressCard-linkButton-3YW {\n        padding: 0 0.25rem 0.25rem;\n    }\n}\n\n@keyframes addressCard-flash-2xj {\n    0% {\n        opacity: 1;\n    }\n    50% {\n        opacity: 0.5;\n    }\n    100% {\n        opacity: 1;\n    }\n}\n",""]),a.locals={root:"addressCard-root-1pp",root_updated:"addressCard-root_updated-3w2 addressCard-root-1pp",flash:"addressCard-flash-2xj",confirmDeleteContainer:"addressCard-confirmDeleteContainer-1IU",confirmDeleteButton:"addressCard-confirmDeleteButton-37f "+t("ysJs").locals.root_normalPriorityNegative,cancelDeleteButton:"addressCard-cancelDeleteButton-3p2 "+t("ysJs").locals.root_lowPriority,contentContainer:"addressCard-contentContainer-1zl",actionContainer:"addressCard-actionContainer-ZU9",defaultBadge:"addressCard-defaultBadge-2mz",name:"addressCard-name-y7R",telephone:"addressCard-telephone-2VP",linkButton:"addressCard-linkButton-3YW "+t("Gs8Z").locals.root,editButton:"addressCard-editButton-1kJ addressCard-linkButton-3YW "+t("Gs8Z").locals.root,deleteButton:"addressCard-deleteButton-2J- addressCard-linkButton-3YW "+t("Gs8Z").locals.root,actionLabel:"addressCard-actionLabel-2rd"}},hE0V:function(e,a,t){var n=t("Qe2W")
"string"==typeof n&&(n=[[e.i,n,""]])
var r={hmr:!0,transform:void 0,insertInto:void 0}
t("aET+")(n,r)
n.locals&&(e.exports=n.locals)},pd3q:function(e,a,t){var n=t("PH6a")
"string"==typeof n&&(n=[[e.i,n,""]])
var r={hmr:!0,transform:void 0,insertInto:void 0}
t("aET+")(n,r)
n.locals&&(e.exports=n.locals)},qFp3:function(e,a,t){"use strict"
t.r(a)
var n,r,s,d,o,i=t("q1tI"),l=t.n(i),c=t("dDsW"),u=t("kriW"),m=t("qZtU"),g=t("o0o1"),f=t.n(g),p=t("yXPU"),b=t.n(p),C=t("J4zp"),h=t.n(C),E=t("Ty5D"),y=t("VX74"),v=t("OlZo"),A=t("FITH"),k=t("y1Xp"),B=t("VkAN"),D=t.n(B),_=Object(y.gql)(n||(n=D()(["\n    fragment CustomerAddressBookAddressFragment on CustomerAddress {\n        __typename\n        id\n        city\n        country_code\n        default_billing\n        default_shipping\n        firstname\n        lastname\n        middlename\n        postcode\n        region {\n            region\n            region_code\n            region_id\n        }\n        street\n        telephone\n    }\n"]))),w=Object(y.gql)(r||(r=D()(["\n    query GetCustomerAddressesForAddressBook {\n        customer {\n            id\n            addresses {\n                id\n                ...CustomerAddressBookAddressFragment\n            }\n        }\n        countries {\n            id\n            full_name_locale\n        }\n    }\n    ","\n"])),_),x=Object(y.gql)(s||(s=D()(["\n    mutation AddNewCustomerAddressToAddressBook(\n        $address: CustomerAddressInput!\n    ) {\n        createCustomerAddress(input: $address)\n            @connection(key: \"createCustomerAddress\") {\n            # We don't manually write to the cache to update the collection\n            # after adding a new address so there's no need to query for a bunch\n            # of address fields here. We use refetchQueries to refresh the list.\n            id\n        }\n    }\n"]))),O=Object(y.gql)(d||(d=D()(['\n    mutation UpdateCustomerAddressInAddressBook(\n        $addressId: Int!\n        $updated_address: CustomerAddressInput!\n    ) {\n        updateCustomerAddress(id: $addressId, input: $updated_address)\n            @connection(key: "updateCustomerAddress") {\n            id\n            ...CustomerAddressBookAddressFragment\n        }\n    }\n    ',"\n"])),_),j={createCustomerAddressMutation:x,deleteCustomerAddressMutation:Object(y.gql)(o||(o=D()(["\n    mutation DeleteCustomerAddressFromAddressBook($addressId: Int!) {\n        deleteCustomerAddress(id: $addressId)\n    }\n"]))),getCustomerAddressesQuery:w,updateCustomerAddressMutation:O},N=t("UPvi"),P=t("oTwF"),M=t("6QXU"),I=t("DUu4"),q=t("17x9"),F=t("1raM"),T=t("Y5IA"),W=t("ACyH"),U=t("2CKw"),z=t.n(U),X=function AddressCard(e){var a=e.address,t=e.classes,n=e.countryName,r=e.isConfirmingDelete,s=e.isDeletingCustomerAddress,d=e.onCancelDelete,o=e.onConfirmDelete,i=e.onEdit,c=e.onDelete,m=a.city,g=a.country_code,f=a.default_shipping,p=a.firstname,b=a.middlename,C=void 0===b?"":b,h=a.lastname,E=a.postcode,y=a.region.region,v=a.street,A=a.telephone,B=Object(k.a)(z.a,t),D={root_normalPriorityNegative:B.confirmDeleteButton},_={root_lowPriority:B.cancelDeleteButton},w=v.map(function(e,a){return l.a.createElement("span",{className:B.streetRow,key:a},e)}),x=f?l.a.createElement("span",{className:B.defaultBadge},l.a.createElement(u.a,{id:"addressCard.defaultText",defaultMessage:"Default"})):null,O=[p,C,h].filter(function(e){return!!e}).join(" "),j="".concat(m,", ").concat(y," ").concat(E),N=f?null:l.a.createElement(M.a,{classes:{root:B.deleteButton},onClick:c},l.a.createElement(P.a,{classes:{icon:null},size:16,src:F.a}),l.a.createElement("span",{className:B.actionLabel},l.a.createElement(u.a,{id:"addressBookPage.deleteAddress",defaultMessage:"Delete"}))),I=r?l.a.createElement("div",{className:B.confirmDeleteContainer},l.a.createElement(W.a,{classes:D,disabled:s,priority:"normal",type:"button",negative:!0,onClick:o},l.a.createElement(u.a,{id:"global.deleteButton",defaultMessage:"Delete"})),l.a.createElement(W.a,{classes:_,disabled:s,priority:"low",type:"button",onClick:d},l.a.createElement(u.a,{id:"global.cancelButton",defaultMessage:"Cancel"}))):null
return l.a.createElement("div",{className:B.root},l.a.createElement("div",{className:B.contentContainer},x,l.a.createElement("span",{className:B.name},O),w,l.a.createElement("span",{className:B.additionalAddress},j),l.a.createElement("span",{className:B.country},n||g),l.a.createElement("span",{className:B.telephone},l.a.createElement(u.a,{id:"addressBookPage.telephone",values:{telephone:A}}))),l.a.createElement("div",{className:B.actionContainer},l.a.createElement(M.a,{classes:{root:B.editButton},onClick:i},l.a.createElement(P.a,{classes:{icon:null},size:16,src:T.a}),l.a.createElement("span",{className:B.actionLabel},l.a.createElement(u.a,{id:"addressBookPage.editAddress",defaultMessage:"Edit"}))),N,I))},J=X
X.propTypes={address:Object(q.shape)({city:q.string,country_code:q.string,default_shipping:q.bool,firstname:q.string,lastname:q.string,postcode:q.string,region:Object(q.shape)({region_code:q.string,region:q.string}),street:Object(q.arrayOf)(q.string),telephone:q.string}).isRequired,classes:Object(q.shape)({actionContainer:q.string,actionLabel:q.string,additionalAddress:q.string,contentContainer:q.string,country:q.string,defaultBadge:q.string,defaultCard:q.string,deleteButton:q.string,editButton:q.string,flash:q.string,linkButton:q.string,name:q.string,root:q.string,root_updated:q.string,streetRow:q.string,telephone:q.string}),countryName:q.string,isConfirmingDelete:q.bool,isDeletingCustomerAddress:q.bool,onCancelDelete:q.func,onConfirmDelete:q.func,onDelete:q.func,onEdit:q.func}
var Q=t("LGPB"),S=t("Ri9G"),L=t("SuX4"),$=t("KFAD"),R=t("7X3U"),V=t("dTQg"),Z=t("XfiJ"),G=t("x/sB"),Y=t("lX7o"),H=t("pd3q"),K=t.n(H),ee=function AddEditDialog(e){var a=e.formErrors,t=e.formProps,n=e.isBusy,r=e.isEditMode,s=e.isOpen,d=e.onCancel,o=e.onConfirm,i=Object(c.a)().formatMessage,u=Object(k.a)(K.a,e.classes),m=i(r?{id:"addressBookPage.editDialogTitle",defaultMessage:"Edit Address"}:{id:"addressBookPage.addDialogTitle",defaultMessage:"New Address"}),g=i({id:"global.firstName",defaultMessage:"First Name"}),f=i({id:"global.middleName",defaultMessage:"Middle Name"}),p=i({id:"global.lastName",defaultMessage:"Last Name"}),b=i({id:"global.streetAddress",defaultMessage:"Street Address"}),C=i({id:"global.streetAddress2",defaultMessage:"Street Address 2"}),h=i({id:"global.city",defaultMessage:"City"}),E=i({id:"global.phoneNumber",defaultMessage:"Phone Number"}),y=i({id:"addressBookPage.makeDefaultAddress",defaultMessage:"Make this my default address"})
return l.a.createElement($.a,{confirmTranslationId:"global.save",confirmText:"Save",formProps:t,isOpen:s,onCancel:d,onConfirm:o,shouldDisableAllButtons:n,shouldUnmountOnHide:!0,title:m},l.a.createElement(V.a,{classes:{root:u.errorContainer},errors:Array.from(a.values())}),l.a.createElement("div",{className:u.root},l.a.createElement("div",{className:u.firstname},l.a.createElement(R.a,{id:"firstname",label:g},l.a.createElement(Y.a,{field:"firstname",validate:Q.c}))),l.a.createElement("div",{className:u.middlename},l.a.createElement(R.a,{id:"middlename",label:f,optional:!0},l.a.createElement(Y.a,{field:"middlename"}))),l.a.createElement("div",{className:u.lastname},l.a.createElement(R.a,{id:"lastname",label:p},l.a.createElement(Y.a,{field:"lastname",validate:Q.c}))),l.a.createElement("div",{className:u.country},l.a.createElement(L.a,{field:"country_code",validate:Q.c})),l.a.createElement("div",{className:u.street1},l.a.createElement(R.a,{id:"street1",label:b},l.a.createElement(Y.a,{field:"street[0]",validate:Q.c}))),l.a.createElement("div",{className:u.street2},l.a.createElement(R.a,{id:"street2",label:C,optional:!0},l.a.createElement(Y.a,{field:"street[1]"}))),l.a.createElement("div",{className:u.city},l.a.createElement(R.a,{id:"city",label:h},l.a.createElement(Y.a,{field:"city",validate:Q.c}))),l.a.createElement("div",{className:u.region},l.a.createElement(G.a,{countryCodeField:"country_code",fieldInput:"region[region]",fieldSelect:"region[region_id]",optionValueKey:"id",validate:Q.c})),l.a.createElement("div",{className:u.postcode},l.a.createElement(Z.a,{validate:Q.c})),l.a.createElement("div",{className:u.telephone},l.a.createElement(R.a,{id:"telephone",label:E},l.a.createElement(Y.a,{field:"telephone",validate:Q.c}))),l.a.createElement("div",{className:u.default_address_check},l.a.createElement(S.a,{field:"default_shipping",label:y}))))},ae=ee
ee.propTypes={classes:Object(q.shape)({root:q.string,city:q.string,country:q.string,default_address_check:q.string,errorContainer:q.string,firstname:q.string,lastname:q.string,middlename:q.string,postcode:q.string,region:q.string,street1:q.string,street2:q.string,telephone:q.string}),formErrors:q.object,isEditMode:q.bool,isOpen:q.bool,onCancel:q.func,onConfirm:q.func}
var te=t("hE0V"),ne=t.n(te),re=function AddressBookPage(e){var a=function useAddressBookPage(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object(k.a)(j,e.operations),t=a.createCustomerAddressMutation,n=a.deleteCustomerAddressMutation,r=a.getCustomerAddressesQuery,s=a.updateCustomerAddressMutation,d=Object(v.b)(),o=h()(d,2)[1].actions.setPageLoading,l=Object(A.b)(),c=h()(l,1)[0].isSignedIn,u=Object(E.g)(),m=Object(y.useQuery)(r,{fetchPolicy:"cache-and-network",skip:!c}),g=m.data,p=m.loading,C=Object(y.useMutation)(n),B=h()(C,2),D=B[0],_=B[1].loading,w=Object(i.useState)(),x=h()(w,2),O=x[0],N=x[1],P=!!g&&p,M=g&&g.customer&&g.customer.addresses||[],I=Object(y.useMutation)(t),q=h()(I,2),F=q[0],T=q[1],W=T.error,U=T.loading,z=Object(y.useMutation)(s),X=h()(z,2),J=X[0],Q=X[1],S=Q.error,L=Q.loading,$=Object(i.useState)(!1),R=h()($,2),V=R[0],Z=R[1],G=Object(i.useState)(!1),Y=h()(G,2),H=Y[0],K=Y[1],ee=Object(i.useState)({}),ae=h()(ee,2),te=ae[0],ne=ae[1],re=Object(i.useState)(!1),se=h()(re,2),de=se[0],oe=se[1]
Object(i.useEffect)(function(){c||u.push("/")},[u,c]),Object(i.useEffect)(function(){o(P)},[P,o])
var ie,le=Object(i.useCallback)(function(){oe(!1),K(!1),ne({country_code:"US"}),Z(!0)},[]),ce=Object(i.useCallback)(function(e){N(e)},[]),ue=Object(i.useCallback)(function(){N(null)},[]),me=Object(i.useCallback)(b()(f.a.mark(function _callee(){return f.a.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D({variables:{addressId:O},refetchQueries:[{query:r}],awaitRefetchQueries:!0})
case 3:N(null),e.next=9
break
case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return")
case 9:case"end":return e.stop()}},_callee,null,[[0,6]])})),[O,D,r]),ge=Object(i.useCallback)(function(e){oe(!1),K(!0),ne(e),Z(!0)},[]),fe=Object(i.useCallback)(function(){Z(!1)},[]),pe=Object(i.useCallback)((ie=b()(f.a.mark(function _callee2(e){return f.a.wrap(function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:if(!H){a.next=13
break}return a.prev=1,a.next=4,J({variables:{addressId:te.id,updated_address:e},refetchQueries:[{query:r}],awaitRefetchQueries:!0})
case 4:Z(!1),a.next=11
break
case 7:return a.prev=7,a.t0=a.catch(1),oe(!0),a.abrupt("return")
case 11:a.next=23
break
case 13:return a.prev=13,a.next=16,F({variables:{address:e},refetchQueries:[{query:r}],awaitRefetchQueries:!0})
case 16:Z(!1),a.next=23
break
case 19:return a.prev=19,a.t1=a.catch(13),oe(!0),a.abrupt("return")
case 23:case"end":return a.stop()}},_callee2,null,[[1,7],[13,19]])})),function(e){return ie.apply(this,arguments)}),[F,te,r,H,J]),be=Object(i.useMemo)(function(){return de?new Map([["createCustomerAddressMutation",W],["updateCustomerAddressMutation",S]]):new Map},[W,de,S]),Ce=Object(i.useMemo)(function(){var e=new Map
return g&&g.countries.forEach(function(a){e.set(a.id,a.full_name_locale)}),e},[g])
return{confirmDeleteAddressId:O,countryDisplayNameMap:Ce,customerAddresses:M,formErrors:be,formProps:{initialValues:te},handleAddAddress:le,handleCancelDeleteAddress:ue,handleCancelDialog:fe,handleConfirmDeleteAddress:me,handleConfirmDialog:pe,handleDeleteAddress:ce,handleEditAddress:ge,isDeletingCustomerAddress:_,isDialogBusy:U||L,isDialogEditMode:H,isDialogOpen:V,isLoading:!g&&p}}(),t=a.confirmDeleteAddressId,n=a.countryDisplayNameMap,r=a.customerAddresses,s=a.formErrors,d=a.formProps,o=a.handleAddAddress,g=a.handleCancelDeleteAddress,p=a.handleCancelDialog,C=a.handleConfirmDeleteAddress,B=a.handleConfirmDialog,D=a.handleDeleteAddress,_=a.handleEditAddress,w=a.isDeletingCustomerAddress,x=a.isDialogBusy,O=a.isDialogEditMode,q=a.isDialogOpen,F=a.isLoading,T=Object(c.a)().formatMessage,W=Object(k.a)(ne.a,e.classes),U=T({id:"addressBookPage.addressBookText",defaultMessage:"Address Book"}),z=Object(i.useMemo)(function(){return Array.from(r).sort(function defaultToBeginning(e,a){return e.default_shipping?-1:a.default_shipping?1:0}).map(function(e){var a=n.get(e.country_code),r=t===e.id
return l.a.createElement(J,{address:e,countryName:a,isConfirmingDelete:r,isDeletingCustomerAddress:w,key:e.id,onCancelDelete:g,onConfirmDelete:C,onDelete:function boundDelete(){return D(e.id)},onEdit:function boundEdit(){return _(e)}})})},[t,n,r,g,C,D,_,w])
if(F)return I.a
var X="".concat(U," - ").concat("Venia")
return l.a.createElement("div",{className:W.root},l.a.createElement(N.b,null,X),l.a.createElement("h1",{className:W.heading},U),l.a.createElement("div",{className:W.content},z,l.a.createElement(M.a,{className:W.addButton,key:"addAddressButton",onClick:o},l.a.createElement(P.a,{classes:{icon:W.addIcon},size:24,src:m.a}),l.a.createElement("span",{className:W.addText},l.a.createElement(u.a,{id:"addressBookPage.addAddressText",defaultMessage:"Add an Address"})))),l.a.createElement(ae,{formErrors:s,formProps:d,isBusy:x,isEditMode:O,isOpen:q,onCancel:p,onConfirm:B}))}
t.d(a,"default",function(){return re})}}])
