{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{IYh2:function(e,t,a){(t=e.exports=a(\"JPst\")(!1)).i(a(\"ysJs\"),\"\"),t.push([e.i,\".searchPage-root-pgQ {\\n    padding: 1rem;\\n}\\n\\n.searchPage-categoryTop-2EO {\\n    align-items: center;\\n    color: rgb(var(--venia-global-color-text-alt));\\n    display: flex;\\n    flex-wrap: wrap;\\n    justify-content: center;\\n}\\n\\n.searchPage-noResult-Zxz {\\n    display: flex;\\n}\\n\\n.searchPage-headerButtons-v21 {\\n    display: flex;\\n    flex-basis: 100%;\\n    justify-content: center;\\n    margin: 1rem 0;\\n}\\n\\n.searchPage-heading-1kN {\\n    line-height: var(--venia-global-typography-heading-lineHeight);\\n    margin: 2.5rem 0 1rem;\\n    max-width: 75vw;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n}\\n\\n.searchPage-headingHighlight-12s {\\n    font-weight: var(--venia-global-fontWeight-bold);\\n}\\n\\n.searchPage-filterButton-1D5 {\\n    min-width: 6.25rem;\\n}\\n\\n.searchPage-sortContainer-jkh {\\n    font-size: 0.875rem;\\n}\\n\\n.searchPage-sortText-3Ha {\\n    font-weight: 600;\\n}\\n\",\"\"]),t.locals={root:\"searchPage-root-pgQ\",categoryTop:\"searchPage-categoryTop-2EO\",noResult:\"searchPage-noResult-Zxz\",headerButtons:\"searchPage-headerButtons-v21\",heading:\"searchPage-heading-1kN\",headingHighlight:\"searchPage-headingHighlight-12s\",filterButton:\"searchPage-filterButton-1D5 \"+a(\"ysJs\").locals.root_lowPriority,sortContainer:\"searchPage-sortContainer-jkh\",sortText:\"searchPage-sortText-3Ha\"}},N6ZK:function(e,t,a){\"use strict\"\na.r(t)\nvar n,r,s,o,c=a(\"J4zp\"),i=a.n(c),l=a(\"q1tI\"),u=a.n(l),g=a(\"dDsW\"),h=a(\"kriW\"),d=a(\"17x9\"),p=a(\"lSNA\"),f=a.n(p),m=a(\"RIqP\"),P=a.n(m),y=a(\"VX74\"),b=a(\"Ty5D\"),v=a(\"y1Xp\"),E=a(\"OlZo\"),j=a(\"Cszt\"),O=a(\"PKba\"),S=a(\"IOPv\"),w=a(\"Unmo\"),x=a(\"+wQL\"),N=a(\"VkAN\"),T=a.n(N),_=Object(y.gql)(n||(n=T()([\"\\n    query getPageSize {\\n        storeConfig {\\n            id\\n            grid_per_page\\n        }\\n    }\\n\"]))),C=Object(y.gql)(r||(r=T()([\"\\n    query getProductFiltersBySearch($search: String!) {\\n        products(search: $search) {\\n            aggregations {\\n                label\\n                count\\n                attribute_code\\n                options {\\n                    label\\n                    value\\n                }\\n            }\\n        }\\n    }\\n\"]))),k=Object(y.gql)(s||(s=T()([\"\\n    query ProductSearch(\\n        $currentPage: Int = 1\\n        $inputText: String!\\n        $pageSize: Int = 6\\n        $filters: ProductAttributeFilterInput!\\n        $sort: ProductAttributeSortInput\\n    ) {\\n        products(\\n            currentPage: $currentPage\\n            pageSize: $pageSize\\n            search: $inputText\\n            filter: $filters\\n            sort: $sort\\n        ) {\\n            items {\\n                id\\n                name\\n                small_image {\\n                    url\\n                }\\n                url_key\\n                url_suffix\\n                price {\\n                    regularPrice {\\n                        amount {\\n                            value\\n                            currency\\n                        }\\n                    }\\n                }\\n            }\\n            page_info {\\n                total_pages\\n            }\\n            total_count\\n        }\\n    }\\n\"]))),I={getFilterInputsQuery:Object(y.gql)(o||(o=T()(['\\n    query GetFilterInputsForSearch {\\n        __type(name: \"ProductAttributeFilterInput\") {\\n            inputFields {\\n                name\\n                type {\\n                    name\\n                }\\n            }\\n        }\\n    }\\n']))),getPageSize:_,getProductFiltersBySearchQuery:C,productSearchQuery:k},z=a(\"C0us\"),F=a(\"M+E3\"),M=a(\"vh/y\"),Q=a(\"DUu4\"),R=a(\"tuiD\"),B=a(\"ACyH\"),D=a(\"k+LG\"),$=a.n(D),q=function SearchPage(e){var t,a=Object(v.a)($.a,e.classes),n=function useSearchPage(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(v.a)(I,e.operations),a=t.getFilterInputsQuery,n=t.getPageSize,r=t.getProductFiltersBySearchQuery,s=t.productSearchQuery,o=Object(y.useQuery)(n,{fetchPolicy:\"cache-and-network\",nextFetchPolicy:\"cache-first\"}).data,c=o&&o.storeConfig.grid_per_page,u=Object(w.a)(),g=i()(u,1)[0],h=g.sortAttribute,d=g.sortDirection,p=Object(l.useRef)(g),m=Object(b.h)(),N=m.search,T=Object(l.useRef)(N),_=Object(j.a)(),C=i()(_,2),k=C[0],z=C[1],F=k.currentPage,M=k.totalPages,Q=z.setCurrentPage,R=z.setTotalPages,B=Object(E.b)(),D=i()(B,2)[1],$=D.toggleDrawer,q=D.actions.setPageLoading,A=Object(S.a)(\"query\",m),H=Object(l.useMemo)(function(){var e=Object(x.c)(N)\nif(0===e.size)return null\nvar t=e.get(\"category_id\")\nreturn t?P()(t).map(function(e){return e.split(\",\")[0]}).join(\", \"):null},[N]),L=Object(l.useCallback)(function(){$(\"filter\")},[$]),J=Object(y.useQuery)(a),U=J.called,Z=J.data,G=J.loading,W=Object(l.useMemo)(function(){var e=new Map\nreturn Z&&Z.__type.inputFields.forEach(function(t){var a=t.name,n=t.type\ne.set(a,n.name)}),e},[Z]),K={currentPage:F,setPage:Q,totalPages:M},V=Object(y.useLazyQuery)(s,{fetchPolicy:\"cache-and-network\",nextFetchPolicy:\"cache-first\"}),X=i()(V,2),Y=X[0],ee=X[1],te=ee.called,ae=ee.loading,ne=ee.error,re=ee.data,se=!!re&&ae\nObject(l.useEffect)(function(){q(se)},[se,q]),Object(l.useEffect)(function(){if(W.size&&c){var e=Object(x.c)(N),t={}\ne.forEach(function(e,a){t[a]=Object(x.b)(e,W.get(a))}),Y({variables:{currentPage:Number(F),filters:t,inputText:A,pageSize:Number(c),sort:f()({},h,d)}})}},[F,W,A,Y,c,N,d,h]),Object(l.useEffect)(function(){var e=re?re.products.page_info.total_pages:null\nreturn R(e),function(){R(null)}},[re,R]),Object(l.useEffect)(function(){var e=new URLSearchParams(T.current),t=new URLSearchParams(N)\ne.delete(\"page\"),t.delete(\"page\"),e.toString()===t.toString()&&p.current.sortAttribute.toString()===g.sortAttribute.toString()&&p.current.sortDirection.toString()===g.sortDirection.toString()||(Q(1),T.current=N,p.current=g)},[g,N,Q])\nvar oe=Object(y.useLazyQuery)(r,{fetchPolicy:\"cache-and-network\",nextFetchPolicy:\"cache-first\"}),ce=i()(oe,2),ie=ce[0],le=ce[1].data\nObject(l.useEffect)(function(){A&&ie({variables:{search:A}})},[ie,A,N])\nvar ue=le?le.products.aggregations:null,ge=U&&!te||ae||G\nreturn Object(O.a)(F),{data:re,error:ne,filters:ue,loading:ge,openDrawer:L,pageControl:K,searchCategory:H,searchTerm:A,sortProps:u}}(),r=n.data,s=n.error,o=n.filters,c=n.loading,d=n.openDrawer,p=n.pageControl,m=n.searchCategory,N=n.searchTerm,T=n.sortProps,_=Object(g.a)().formatMessage,C=i()(T,1)[0]\nif(!r){if(c)return Q.a\nif(s)return u.a.createElement(\"div\",{className:a.noResult},u.a.createElement(h.a,{id:\"searchPage.noResult\",defaultMessage:\"No results found. The search term may be missing or invalid.\"}))}t=0===r.products.items.length?u.a.createElement(\"div\",{className:a.noResult},u.a.createElement(h.a,{id:\"searchPage.noResultImportant\",defaultMessage:\"No results found!\"})):u.a.createElement(l.Fragment,null,u.a.createElement(\"section\",{className:a.gallery},u.a.createElement(M.a,{items:r.products.items})),u.a.createElement(\"section\",{className:a.pagination},u.a.createElement(z.a,{pageControl:p})))\nvar k=r.products.total_count||0,D=o&&o.length?u.a.createElement(B.a,{priority:\"low\",classes:{root_lowPriority:a.filterButton},onClick:d,type:\"button\"},u.a.createElement(h.a,{id:\"searchPage.filterButton\",defaultMessage:\"Filter\"})):null,q=o&&o.length?u.a.createElement(F.a,{filters:o}):null,A=k?u.a.createElement(R.a,{sortProps:T}):null,H=k?u.a.createElement(\"span\",{className:a.sortContainer},u.a.createElement(h.a,{id:\"searchPage.sortContainer\",defaultMessage:\"Items sorted by \"}),u.a.createElement(\"span\",{className:a.sortText},u.a.createElement(h.a,{id:C.sortId,defaultMessage:C.sortText}))):null,L=N?u.a.createElement(h.a,{id:\"searchPage.searchTerm\",values:{highlight:function highlight(e){return u.a.createElement(\"span\",{className:a.headingHighlight},e)},category:m,term:N},defaultMessage:\"Showing results:\"}):u.a.createElement(h.a,{id:\"searchPage.searchTermEmpty\",defaultMessage:\"Showing all results:\"})\nreturn u.a.createElement(\"article\",{className:a.root},u.a.createElement(\"div\",{className:a.categoryTop},u.a.createElement(\"span\",{className:a.totalPages},_({id:\"searchPage.totalPages\",defaultMessage:\"items\"},{totalCount:k})),u.a.createElement(\"div\",{className:a.headerButtons},D,A),H),u.a.createElement(\"div\",{className:a.heading},L),t,u.a.createElement(l.Suspense,{fallback:null},q))},A=q\nq.propTypes={classes:Object(d.shape)({noResult:d.string,root:d.string,totalPages:d.string})},a.d(t,\"default\",function(){return A})},\"k+LG\":function(e,t,a){var n=a(\"IYh2\")\n\"string\"==typeof n&&(n=[[e.i,n,\"\"]])\nvar r={hmr:!0,transform:void 0,insertInto:void 0}\na(\"aET+\")(n,r)\nn.locals&&(e.exports=n.locals)}}])\n","extractedComments":[]}