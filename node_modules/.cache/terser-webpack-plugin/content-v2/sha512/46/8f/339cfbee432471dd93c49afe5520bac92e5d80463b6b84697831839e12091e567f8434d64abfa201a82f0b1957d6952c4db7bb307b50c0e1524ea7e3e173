{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{NYgU:function(e,t,n){\"use strict\"\nn.r(t)\nvar a,i,s=n(\"J4zp\"),o=n.n(s),r=n(\"q1tI\"),c=n.n(r),u=n(\"dDsW\"),m=n(\"kriW\"),l=n(\"8UhI\"),d=n(\"Ty5D\"),b=n(\"J3e4\"),g=n(\"o0o1\"),f=n.n(g),p=n(\"yXPU\"),h=n.n(p),y=n(\"VX74\"),v=n(\"y1Xp\"),P=n(\"FITH\"),S=n(\"VkAN\"),w=n.n(S),j=Object(y.gql)(a||(a=w()([\"\\n    mutation SetNewsletterSubscription($isSubscribed: Boolean!) {\\n        updateCustomer(input: { is_subscribed: $isSubscribed }) {\\n            customer {\\n                id\\n                is_subscribed\\n            }\\n        }\\n    }\\n\"]))),x={getCustomerSubscriptionQuery:Object(y.gql)(i||(i=w()([\"\\n    query GetCustomerSubscription {\\n        customer {\\n            id\\n            is_subscribed\\n        }\\n    }\\n\"]))),setNewsletterSubscriptionMutation:j},C=n(\"ACyH\"),E=n(\"Ri9G\"),M=n(\"7X3U\"),k=n(\"dTQg\"),N=n(\"UPvi\"),O=n(\"DUu4\"),T=n(\"eWo+\"),W=n.n(T),I=function CommunicationsPage(e){var t=Object(u.a)().formatMessage,n=Object(v.a)(W.a,e.classes),a=Object(b.a)(),i=o()(a,2)[1].addToast,s=function useCommunicationsPage(e){var t,n=e.afterSubmit,a=Object(v.a)(x,e.operations),i=a.getCustomerSubscriptionQuery,s=a.setNewsletterSubscriptionMutation,c=Object(P.b)(),u=o()(c,1)[0].isSignedIn,m=Object(y.useQuery)(i,{skip:!u}),l=m.data,d=m.error,b=Object(r.useMemo)(function(){if(l)return{isSubscribed:l.customer.is_subscribed}},[l]),g=Object(y.useMutation)(s),p=o()(g,2),S=p[0],w=p[1],j=w.error,C=w.loading\nreturn{formErrors:[j,d],initialValues:b,handleSubmit:Object(r.useCallback)((t=h()(f.a.mark(function _callee(e){return f.a.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S({variables:e})\ncase 3:t.next=8\nbreak\ncase 5:return t.prev=5,t.t0=t.catch(0),t.abrupt(\"return\")\ncase 8:n&&n()\ncase 9:case\"end\":return t.stop()}},_callee,null,[[0,5]])})),function(e){return t.apply(this,arguments)}),[S,n]),isDisabled:C,isSignedIn:u}}({afterSubmit:Object(r.useCallback)(function(){i({type:\"info\",message:t({id:\"communicationsPage.preferencesText\",defaultMessage:\"Your preferences have been updated.\"}),timeout:5e3})},[i,t])}),g=s.formErrors,p=s.handleSubmit,S=s.initialValues,w=s.isDisabled\nif(!s.isSignedIn)return c.a.createElement(d.a,{to:\"/\"})\nif(!S)return O.a\nvar j=t({id:\"communicationsPage.title\",defaultMessage:\"Communications - {name}\"},{name:\"Venia\"})\nreturn c.a.createElement(\"div\",{className:n.root},c.a.createElement(N.b,null,j),c.a.createElement(\"h1\",{className:n.title},c.a.createElement(m.a,{id:\"communicationsPage.communicationsText\",defaultMessage:\"Communications\"})),c.a.createElement(\"p\",null,c.a.createElement(m.a,{id:\"communicationsPage.optInText\",defaultMessage:\"We'd like to stay in touch. Please check the boxes next to the communications you'd like to receive.\"})),c.a.createElement(k.a,{errors:g}),c.a.createElement(l.f,{className:n.form,onSubmit:p,initialValues:S},c.a.createElement(M.a,{id:\"isSubscribed\",label:t({id:\"communicationsPage.eNewsletterText\",defaultMessage:\"Venia E-Newsletter\"})},c.a.createElement(E.a,{field:\"isSubscribed\",label:t({id:\"communicationsPage.subscribeText\",defaultMessage:\"Stay on the cutting edge of fashion; subscribe to the monthly Venia Newsletter.\"})})),c.a.createElement(\"div\",{className:n.buttonsContainer},c.a.createElement(C.a,{disabled:w,type:\"submit\",priority:\"high\"},t(w?{id:\"communicationsPage.savingText\",defaultMessage:\"Saving\"}:{id:\"communicationsPage.changesText\",defaultMessage:\"Save Changes\"})))))}\nn.d(t,\"default\",function(){return I})},\"eWo+\":function(e,t,n){var a=n(\"he9K\")\n\"string\"==typeof a&&(a=[[e.i,a,\"\"]])\nvar i={hmr:!0,transform:void 0,insertInto:void 0}\nn(\"aET+\")(a,i)\na.locals&&(e.exports=a.locals)},he9K:function(e,t,n){(t=e.exports=n(\"JPst\")(!1)).push([e.i,\".communicationsPage-root--lW {\\n    display: grid;\\n    padding: 2.5rem 3rem;\\n    row-gap: 2rem;\\n}\\n\\n.communicationsPage-title-1fw {\\n    justify-self: center;\\n    font-family: var(--venia-global-fontFamily-serif);\\n    font-weight: var(--venia-global-fontWeight-bold);\\n}\\n\\n.communicationsPage-form-1fu {\\n    display: grid;\\n    row-gap: 2rem;\\n}\\n\\n.communicationsPage-buttonsContainer-4ij {\\n    display: flex;\\n    justify-content: flex-start;\\n}\\n\\n@media (max-width: 960px) {\\n    .communicationsPage-root--lW {\\n        padding-left: 1.5rem;\\n        padding-right: 1.5rem;\\n    }\\n\\n    .communicationsPage-buttonsContainer-4ij {\\n        justify-content: center;\\n    }\\n}\\n\",\"\"]),t.locals={root:\"communicationsPage-root--lW\",title:\"communicationsPage-title-1fw\",form:\"communicationsPage-form-1fu\",buttonsContainer:\"communicationsPage-buttonsContainer-4ij\"}}}])\n","extractedComments":[]}